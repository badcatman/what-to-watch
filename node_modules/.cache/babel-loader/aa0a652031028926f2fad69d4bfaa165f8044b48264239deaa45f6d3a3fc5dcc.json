{"ast":null,"code":"import _objectSpread from\"D:/what-to-watch (1)/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Carousel(_ref){let{items}=_ref;const isMobile=window.innerWidth<768;const itemsPerPage=isMobile?4:8;const[index,setIndex]=useState(0);const[expandedItems,setExpandedItems]=useState({});const containerRef=useRef(null);const touchStartX=useRef(null);const maxIndex=Math.ceil(items.length/itemsPerPage)-1;const next=()=>setIndex(prev=>Math.min(prev+1,maxIndex));const prev=()=>setIndex(prev=>Math.max(prev-1,0));const toggleDescription=title=>{setExpandedItems(prev=>_objectSpread(_objectSpread({},prev),{},{[title]:!prev[title]}));};const currentItems=items.slice(index*itemsPerPage,index*itemsPerPage+itemsPerPage);// Свайп\nuseEffect(()=>{const container=containerRef.current;const handleTouchStart=e=>{touchStartX.current=e.touches[0].clientX;};const handleTouchEnd=e=>{const touchEndX=e.changedTouches[0].clientX;const diff=touchStartX.current-touchEndX;if(Math.abs(diff)>50){if(diff>0){next();// свайп влево\n}else{prev();// свайп вправо\n}}};if(container){container.addEventListener(\"touchstart\",handleTouchStart);container.addEventListener(\"touchend\",handleTouchEnd);}return()=>{if(container){container.removeEventListener(\"touchstart\",handleTouchStart);container.removeEventListener(\"touchend\",handleTouchEnd);}};},[index]);return/*#__PURE__*/_jsxs(\"div\",{ref:containerRef,children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"10px\"},children:[/*#__PURE__*/_jsx(\"button\",{className:\"category-button\",onClick:prev,disabled:index===0,children:\"\\u2190\"}),/*#__PURE__*/_jsx(\"button\",{className:\"category-button\",onClick:next,disabled:index===maxIndex,children:\"\\u2192\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid\",children:currentItems.map(item=>{const isExpanded=expandedItems[item.title];const shortText=item.description.slice(0,70)+\"...\";return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",onClick:()=>toggleDescription(item.title),children:[/*#__PURE__*/_jsx(\"img\",{src:item.poster,alt:item.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:item.title}),/*#__PURE__*/_jsx(\"p\",{children:isExpanded?item.description:shortText})]})]},item.title);})})]});}export default Carousel;","map":{"version":3,"names":["React","useState","useEffect","useRef","jsx","_jsx","jsxs","_jsxs","Carousel","_ref","items","isMobile","window","innerWidth","itemsPerPage","index","setIndex","expandedItems","setExpandedItems","containerRef","touchStartX","maxIndex","Math","ceil","length","next","prev","min","max","toggleDescription","title","_objectSpread","currentItems","slice","container","current","handleTouchStart","e","touches","clientX","handleTouchEnd","touchEndX","changedTouches","diff","abs","addEventListener","removeEventListener","ref","children","style","marginTop","className","onClick","disabled","map","item","isExpanded","shortText","description","src","poster","alt"],"sources":["D:/what-to-watch (1)/src/components/Carousel.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\n\nfunction Carousel({ items }) {\n  const isMobile = window.innerWidth < 768;\n  const itemsPerPage = isMobile ? 4 : 8;\n  const [index, setIndex] = useState(0);\n  const [expandedItems, setExpandedItems] = useState({});\n  const containerRef = useRef(null);\n  const touchStartX = useRef(null);\n\n  const maxIndex = Math.ceil(items.length / itemsPerPage) - 1;\n\n  const next = () => setIndex((prev) => Math.min(prev + 1, maxIndex));\n  const prev = () => setIndex((prev) => Math.max(prev - 1, 0));\n\n  const toggleDescription = (title) => {\n    setExpandedItems((prev) => ({\n      ...prev,\n      [title]: !prev[title],\n    }));\n  };\n\n  const currentItems = items.slice(\n    index * itemsPerPage,\n    index * itemsPerPage + itemsPerPage\n  );\n\n  // Свайп\n  useEffect(() => {\n    const container = containerRef.current;\n\n    const handleTouchStart = (e) => {\n      touchStartX.current = e.touches[0].clientX;\n    };\n\n    const handleTouchEnd = (e) => {\n      const touchEndX = e.changedTouches[0].clientX;\n      const diff = touchStartX.current - touchEndX;\n\n      if (Math.abs(diff) > 50) {\n        if (diff > 0) {\n          next(); // свайп влево\n        } else {\n          prev(); // свайп вправо\n        }\n      }\n    };\n\n    if (container) {\n      container.addEventListener(\"touchstart\", handleTouchStart);\n      container.addEventListener(\"touchend\", handleTouchEnd);\n    }\n\n    return () => {\n      if (container) {\n        container.removeEventListener(\"touchstart\", handleTouchStart);\n        container.removeEventListener(\"touchend\", handleTouchEnd);\n      }\n    };\n  }, [index]);\n\n  return (\n    <div ref={containerRef}>\n      <div style={{ marginTop: \"10px\" }}>\n        <button className=\"category-button\" onClick={prev} disabled={index === 0}>\n          ←\n        </button>\n        <button className=\"category-button\" onClick={next} disabled={index === maxIndex}>\n          →\n        </button>\n      </div>\n      <div className=\"grid\">\n        {currentItems.map((item) => {\n          const isExpanded = expandedItems[item.title];\n          const shortText = item.description.slice(0, 70) + \"...\";\n\n          return (\n            <div className=\"card\" key={item.title} onClick={() => toggleDescription(item.title)}>\n              <img src={item.poster} alt={item.title} />\n              <div className=\"card-content\">\n                <h3>{item.title}</h3>\n                <p>\n                  {isExpanded ? item.description : shortText}\n                </p>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n\nexport default Carousel;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}