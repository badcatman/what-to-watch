{"ast":null,"code":"import _objectSpread from\"D:/what-to-watch (1)/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import contentData from\"./data/content\";import CategoryMenu from\"./components/CategoryMenu\";import Carousel from\"./components/Carousel\";import AddItemForm from\"./components/AddItemForm\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const savedCategory=localStorage.getItem(\"selected-category\")||\"Сериалы\";const savedPages=JSON.parse(localStorage.getItem(\"category-pages\")||\"{}\");const[category,setCategory]=useState(savedCategory);const[categoryPages,setCategoryPages]=useState(savedPages);const[content,setContent]=useState(()=>{const stored=localStorage.getItem(\"what-to-watch-content\");return stored?JSON.parse(stored):contentData;});const[isAdding,setIsAdding]=useState(false);const currentPage=categoryPages[category]||0;useEffect(()=>{localStorage.setItem(\"what-to-watch-content\",JSON.stringify(content));},[content]);useEffect(()=>{localStorage.setItem(\"selected-category\",category);localStorage.setItem(\"category-pages\",JSON.stringify(categoryPages));},[category,categoryPages]);const updateItem=(categoryName,index,updates)=>{const updatedCategory=[...content[categoryName]];updatedCategory[index]=_objectSpread(_objectSpread({},updatedCategory[index]),updates);setContent(prev=>_objectSpread(_objectSpread({},prev),{},{[categoryName]:updatedCategory}));};const deleteItem=(categoryName,index)=>{const confirmed=window.confirm(\"Вы уверены, что хотите скрыть эту позицию?\");if(!confirmed)return;const updatedCategory=[...content[categoryName]];updatedCategory[index].hidden=true;setContent(prev=>_objectSpread(_objectSpread({},prev),{},{[categoryName]:updatedCategory}));};const addItem=(categoryName,newItem)=>{const currentList=content[categoryName]||[];const updatedCategory=[newItem,...currentList];setContent(prev=>_objectSpread(_objectSpread({},prev),{},{[categoryName]:updatedCategory}));setCategory(categoryName);setCategoryPages(prev=>_objectSpread(_objectSpread({},prev),{},{[categoryName]:0}));setIsAdding(false);};const visibleItems=(content[category]||[]).filter(item=>!item.hidden);const sortedItems=[...visibleItems].sort((a,b)=>{if(a.watched&&!b.watched)return 1;if(!a.watched&&b.watched)return-1;return 0;});const handlePageChange=page=>{setCategoryPages(prev=>_objectSpread(_objectSpread({},prev),{},{[category]:page}));};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-container\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"header\",children:\"\\u0427\\u0442\\u043E \\u043F\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\\u0435\\u0442\\u044C?\"}),/*#__PURE__*/_jsx(CategoryMenu,{selected:category,onSelect:cat=>{setCategory(cat);}}),/*#__PURE__*/_jsx(\"button\",{className:\"add-button\",onClick:()=>setIsAdding(true),children:\"+\"})]}),isAdding?/*#__PURE__*/_jsx(AddItemForm,{categories:Object.keys(content),onAdd:addItem,onCancel:()=>setIsAdding(false)}):/*#__PURE__*/_jsx(Carousel,{items:sortedItems,currentPage:currentPage,onPageChange:handlePageChange,onRate:(visibleIndex,stars)=>{const realIndex=content[category].findIndex(item=>!item.hidden&&sortedItems.indexOf(item)===visibleIndex);updateItem(category,realIndex,{rating:stars});},onToggleWatched:visibleIndex=>{const realIndex=content[category].findIndex(item=>!item.hidden&&sortedItems.indexOf(item)===visibleIndex);const current=sortedItems[visibleIndex].watched;updateItem(category,realIndex,{watched:!current});},onDelete:visibleIndex=>{const realIndex=content[category].findIndex(item=>!item.hidden&&sortedItems.indexOf(item)===visibleIndex);deleteItem(category,realIndex);}})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","contentData","CategoryMenu","Carousel","AddItemForm","jsx","_jsx","jsxs","_jsxs","App","savedCategory","localStorage","getItem","savedPages","JSON","parse","category","setCategory","categoryPages","setCategoryPages","content","setContent","stored","isAdding","setIsAdding","currentPage","setItem","stringify","updateItem","categoryName","index","updates","updatedCategory","_objectSpread","prev","deleteItem","confirmed","window","confirm","hidden","addItem","newItem","currentList","visibleItems","filter","item","sortedItems","sort","a","b","watched","handlePageChange","page","className","children","selected","onSelect","cat","onClick","categories","Object","keys","onAdd","onCancel","items","onPageChange","onRate","visibleIndex","stars","realIndex","findIndex","indexOf","rating","onToggleWatched","current","onDelete"],"sources":["D:/what-to-watch (1)/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport contentData from \"./data/content\";\nimport CategoryMenu from \"./components/CategoryMenu\";\nimport Carousel from \"./components/Carousel\";\nimport AddItemForm from \"./components/AddItemForm\";\n\nfunction App() {\n  const savedCategory = localStorage.getItem(\"selected-category\") || \"Сериалы\";\n  const savedPages = JSON.parse(localStorage.getItem(\"category-pages\") || \"{}\");\n\n  const [category, setCategory] = useState(savedCategory);\n  const [categoryPages, setCategoryPages] = useState(savedPages);\n  const [content, setContent] = useState(() => {\n    const stored = localStorage.getItem(\"what-to-watch-content\");\n    return stored ? JSON.parse(stored) : contentData;\n  });\n\n  const [isAdding, setIsAdding] = useState(false);\n\n  const currentPage = categoryPages[category] || 0;\n\n  useEffect(() => {\n    localStorage.setItem(\"what-to-watch-content\", JSON.stringify(content));\n  }, [content]);\n\n  useEffect(() => {\n    localStorage.setItem(\"selected-category\", category);\n    localStorage.setItem(\"category-pages\", JSON.stringify(categoryPages));\n  }, [category, categoryPages]);\n\n  const updateItem = (categoryName, index, updates) => {\n    const updatedCategory = [...content[categoryName]];\n    updatedCategory[index] = { ...updatedCategory[index], ...updates };\n    setContent((prev) => ({ ...prev, [categoryName]: updatedCategory }));\n  };\n\n  const deleteItem = (categoryName, index) => {\n    const confirmed = window.confirm(\"Вы уверены, что хотите скрыть эту позицию?\");\n    if (!confirmed) return;\n    const updatedCategory = [...content[categoryName]];\n    updatedCategory[index].hidden = true;\n    setContent((prev) => ({ ...prev, [categoryName]: updatedCategory }));\n  };\n\n  const addItem = (categoryName, newItem) => {\n    const currentList = content[categoryName] || [];\n    const updatedCategory = [newItem, ...currentList];\n    setContent((prev) => ({ ...prev, [categoryName]: updatedCategory }));\n    setCategory(categoryName);\n    setCategoryPages((prev) => ({ ...prev, [categoryName]: 0 }));\n    setIsAdding(false);\n  };\n\n  const visibleItems = (content[category] || []).filter((item) => !item.hidden);\n  const sortedItems = [...visibleItems].sort((a, b) => {\n    if (a.watched && !b.watched) return 1;\n    if (!a.watched && b.watched) return -1;\n    return 0;\n  });\n\n  const handlePageChange = (page) => {\n    setCategoryPages((prev) => ({ ...prev, [category]: page }));\n  };\n\n  return (\n    <div className=\"container\">\n      <div className=\"header-container\">\n        <span className=\"header\">Что посмотреть?</span>\n        <CategoryMenu selected={category} onSelect={(cat) => {\n          setCategory(cat);\n        }} />\n        <button className=\"add-button\" onClick={() => setIsAdding(true)}>+</button>\n      </div>\n\n      {isAdding ? (\n        <AddItemForm\n          categories={Object.keys(content)}\n          onAdd={addItem}\n          onCancel={() => setIsAdding(false)}\n        />\n      ) : (\n        <Carousel\n          items={sortedItems}\n          currentPage={currentPage}\n          onPageChange={handlePageChange}\n          onRate={(visibleIndex, stars) => {\n            const realIndex = content[category].findIndex(\n              (item) => !item.hidden && sortedItems.indexOf(item) === visibleIndex\n            );\n            updateItem(category, realIndex, { rating: stars });\n          }}\n          onToggleWatched={(visibleIndex) => {\n            const realIndex = content[category].findIndex(\n              (item) => !item.hidden && sortedItems.indexOf(item) === visibleIndex\n            );\n            const current = sortedItems[visibleIndex].watched;\n            updateItem(category, realIndex, { watched: !current });\n          }}\n          onDelete={(visibleIndex) => {\n            const realIndex = content[category].findIndex(\n              (item) => !item.hidden && sortedItems.indexOf(item) === visibleIndex\n            );\n            deleteItem(category, realIndex);\n          }}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"yGAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,WAAW,KAAM,gBAAgB,CACxC,MAAO,CAAAC,YAAY,KAAM,2BAA2B,CACpD,MAAO,CAAAC,QAAQ,KAAM,uBAAuB,CAC5C,MAAO,CAAAC,WAAW,KAAM,0BAA0B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEnD,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb,KAAM,CAAAC,aAAa,CAAGC,YAAY,CAACC,OAAO,CAAC,mBAAmB,CAAC,EAAI,SAAS,CAC5E,KAAM,CAAAC,UAAU,CAAGC,IAAI,CAACC,KAAK,CAACJ,YAAY,CAACC,OAAO,CAAC,gBAAgB,CAAC,EAAI,IAAI,CAAC,CAE7E,KAAM,CAACI,QAAQ,CAAEC,WAAW,CAAC,CAAGlB,QAAQ,CAACW,aAAa,CAAC,CACvD,KAAM,CAACQ,aAAa,CAAEC,gBAAgB,CAAC,CAAGpB,QAAQ,CAACc,UAAU,CAAC,CAC9D,KAAM,CAACO,OAAO,CAAEC,UAAU,CAAC,CAAGtB,QAAQ,CAAC,IAAM,CAC3C,KAAM,CAAAuB,MAAM,CAAGX,YAAY,CAACC,OAAO,CAAC,uBAAuB,CAAC,CAC5D,MAAO,CAAAU,MAAM,CAAGR,IAAI,CAACC,KAAK,CAACO,MAAM,CAAC,CAAGrB,WAAW,CAClD,CAAC,CAAC,CAEF,KAAM,CAACsB,QAAQ,CAAEC,WAAW,CAAC,CAAGzB,QAAQ,CAAC,KAAK,CAAC,CAE/C,KAAM,CAAA0B,WAAW,CAAGP,aAAa,CAACF,QAAQ,CAAC,EAAI,CAAC,CAEhDhB,SAAS,CAAC,IAAM,CACdW,YAAY,CAACe,OAAO,CAAC,uBAAuB,CAAEZ,IAAI,CAACa,SAAS,CAACP,OAAO,CAAC,CAAC,CACxE,CAAC,CAAE,CAACA,OAAO,CAAC,CAAC,CAEbpB,SAAS,CAAC,IAAM,CACdW,YAAY,CAACe,OAAO,CAAC,mBAAmB,CAAEV,QAAQ,CAAC,CACnDL,YAAY,CAACe,OAAO,CAAC,gBAAgB,CAAEZ,IAAI,CAACa,SAAS,CAACT,aAAa,CAAC,CAAC,CACvE,CAAC,CAAE,CAACF,QAAQ,CAAEE,aAAa,CAAC,CAAC,CAE7B,KAAM,CAAAU,UAAU,CAAGA,CAACC,YAAY,CAAEC,KAAK,CAAEC,OAAO,GAAK,CACnD,KAAM,CAAAC,eAAe,CAAG,CAAC,GAAGZ,OAAO,CAACS,YAAY,CAAC,CAAC,CAClDG,eAAe,CAACF,KAAK,CAAC,CAAAG,aAAA,CAAAA,aAAA,IAAQD,eAAe,CAACF,KAAK,CAAC,EAAKC,OAAO,CAAE,CAClEV,UAAU,CAAEa,IAAI,EAAAD,aAAA,CAAAA,aAAA,IAAWC,IAAI,MAAE,CAACL,YAAY,EAAGG,eAAe,EAAG,CAAC,CACtE,CAAC,CAED,KAAM,CAAAG,UAAU,CAAGA,CAACN,YAAY,CAAEC,KAAK,GAAK,CAC1C,KAAM,CAAAM,SAAS,CAAGC,MAAM,CAACC,OAAO,CAAC,4CAA4C,CAAC,CAC9E,GAAI,CAACF,SAAS,CAAE,OAChB,KAAM,CAAAJ,eAAe,CAAG,CAAC,GAAGZ,OAAO,CAACS,YAAY,CAAC,CAAC,CAClDG,eAAe,CAACF,KAAK,CAAC,CAACS,MAAM,CAAG,IAAI,CACpClB,UAAU,CAAEa,IAAI,EAAAD,aAAA,CAAAA,aAAA,IAAWC,IAAI,MAAE,CAACL,YAAY,EAAGG,eAAe,EAAG,CAAC,CACtE,CAAC,CAED,KAAM,CAAAQ,OAAO,CAAGA,CAACX,YAAY,CAAEY,OAAO,GAAK,CACzC,KAAM,CAAAC,WAAW,CAAGtB,OAAO,CAACS,YAAY,CAAC,EAAI,EAAE,CAC/C,KAAM,CAAAG,eAAe,CAAG,CAACS,OAAO,CAAE,GAAGC,WAAW,CAAC,CACjDrB,UAAU,CAAEa,IAAI,EAAAD,aAAA,CAAAA,aAAA,IAAWC,IAAI,MAAE,CAACL,YAAY,EAAGG,eAAe,EAAG,CAAC,CACpEf,WAAW,CAACY,YAAY,CAAC,CACzBV,gBAAgB,CAAEe,IAAI,EAAAD,aAAA,CAAAA,aAAA,IAAWC,IAAI,MAAE,CAACL,YAAY,EAAG,CAAC,EAAG,CAAC,CAC5DL,WAAW,CAAC,KAAK,CAAC,CACpB,CAAC,CAED,KAAM,CAAAmB,YAAY,CAAG,CAACvB,OAAO,CAACJ,QAAQ,CAAC,EAAI,EAAE,EAAE4B,MAAM,CAAEC,IAAI,EAAK,CAACA,IAAI,CAACN,MAAM,CAAC,CAC7E,KAAM,CAAAO,WAAW,CAAG,CAAC,GAAGH,YAAY,CAAC,CAACI,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAK,CACnD,GAAID,CAAC,CAACE,OAAO,EAAI,CAACD,CAAC,CAACC,OAAO,CAAE,MAAO,EAAC,CACrC,GAAI,CAACF,CAAC,CAACE,OAAO,EAAID,CAAC,CAACC,OAAO,CAAE,MAAO,CAAC,CAAC,CACtC,MAAO,EAAC,CACV,CAAC,CAAC,CAEF,KAAM,CAAAC,gBAAgB,CAAIC,IAAI,EAAK,CACjCjC,gBAAgB,CAAEe,IAAI,EAAAD,aAAA,CAAAA,aAAA,IAAWC,IAAI,MAAE,CAAClB,QAAQ,EAAGoC,IAAI,EAAG,CAAC,CAC7D,CAAC,CAED,mBACE5C,KAAA,QAAK6C,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxB9C,KAAA,QAAK6C,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BhD,IAAA,SAAM+C,SAAS,CAAC,QAAQ,CAAAC,QAAA,CAAC,kFAAe,CAAM,CAAC,cAC/ChD,IAAA,CAACJ,YAAY,EAACqD,QAAQ,CAAEvC,QAAS,CAACwC,QAAQ,CAAGC,GAAG,EAAK,CACnDxC,WAAW,CAACwC,GAAG,CAAC,CAClB,CAAE,CAAE,CAAC,cACLnD,IAAA,WAAQ+C,SAAS,CAAC,YAAY,CAACK,OAAO,CAAEA,CAAA,GAAMlC,WAAW,CAAC,IAAI,CAAE,CAAA8B,QAAA,CAAC,GAAC,CAAQ,CAAC,EACxE,CAAC,CAEL/B,QAAQ,cACPjB,IAAA,CAACF,WAAW,EACVuD,UAAU,CAAEC,MAAM,CAACC,IAAI,CAACzC,OAAO,CAAE,CACjC0C,KAAK,CAAEtB,OAAQ,CACfuB,QAAQ,CAAEA,CAAA,GAAMvC,WAAW,CAAC,KAAK,CAAE,CACpC,CAAC,cAEFlB,IAAA,CAACH,QAAQ,EACP6D,KAAK,CAAElB,WAAY,CACnBrB,WAAW,CAAEA,WAAY,CACzBwC,YAAY,CAAEd,gBAAiB,CAC/Be,MAAM,CAAEA,CAACC,YAAY,CAAEC,KAAK,GAAK,CAC/B,KAAM,CAAAC,SAAS,CAAGjD,OAAO,CAACJ,QAAQ,CAAC,CAACsD,SAAS,CAC1CzB,IAAI,EAAK,CAACA,IAAI,CAACN,MAAM,EAAIO,WAAW,CAACyB,OAAO,CAAC1B,IAAI,CAAC,GAAKsB,YAC1D,CAAC,CACDvC,UAAU,CAACZ,QAAQ,CAAEqD,SAAS,CAAE,CAAEG,MAAM,CAAEJ,KAAM,CAAC,CAAC,CACpD,CAAE,CACFK,eAAe,CAAGN,YAAY,EAAK,CACjC,KAAM,CAAAE,SAAS,CAAGjD,OAAO,CAACJ,QAAQ,CAAC,CAACsD,SAAS,CAC1CzB,IAAI,EAAK,CAACA,IAAI,CAACN,MAAM,EAAIO,WAAW,CAACyB,OAAO,CAAC1B,IAAI,CAAC,GAAKsB,YAC1D,CAAC,CACD,KAAM,CAAAO,OAAO,CAAG5B,WAAW,CAACqB,YAAY,CAAC,CAACjB,OAAO,CACjDtB,UAAU,CAACZ,QAAQ,CAAEqD,SAAS,CAAE,CAAEnB,OAAO,CAAE,CAACwB,OAAQ,CAAC,CAAC,CACxD,CAAE,CACFC,QAAQ,CAAGR,YAAY,EAAK,CAC1B,KAAM,CAAAE,SAAS,CAAGjD,OAAO,CAACJ,QAAQ,CAAC,CAACsD,SAAS,CAC1CzB,IAAI,EAAK,CAACA,IAAI,CAACN,MAAM,EAAIO,WAAW,CAACyB,OAAO,CAAC1B,IAAI,CAAC,GAAKsB,YAC1D,CAAC,CACDhC,UAAU,CAACnB,QAAQ,CAAEqD,SAAS,CAAC,CACjC,CAAE,CACH,CACF,EACE,CAAC,CAEV,CAEA,cAAe,CAAA5D,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}