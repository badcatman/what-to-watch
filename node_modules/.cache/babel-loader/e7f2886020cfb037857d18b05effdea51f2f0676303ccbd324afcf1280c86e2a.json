{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Carousel(_ref){let{items,onRate,onToggleWatched,onDelete}=_ref;const[index,setIndex]=useState(0);const[expanded,setExpanded]=useState([]);const[touchStartX,setTouchStartX]=useState(null);const isMobile=window.innerWidth<768;const itemsPerPage=isMobile?4:8;const maxIndex=Math.ceil(items.length/itemsPerPage)-1;useEffect(()=>{setExpanded(new Array(items.length).fill(false));},[items]);const handleToggleExpand=i=>{setExpanded(prev=>{const updated=[...prev];updated[i]=!updated[i];return updated;});};const next=()=>setIndex(prev=>Math.min(prev+1,maxIndex));const prev=()=>setIndex(prev=>Math.max(prev-1,0));const currentItems=items.slice(index*itemsPerPage,index*itemsPerPage+itemsPerPage);const handleTouchStart=e=>setTouchStartX(e.touches[0].clientX);const handleTouchEnd=e=>{if(touchStartX===null)return;const deltaX=e.changedTouches[0].clientX-touchStartX;if(deltaX>50)prev();else if(deltaX<-50)next();setTouchStartX(null);};return/*#__PURE__*/_jsxs(\"div\",{onTouchStart:handleTouchStart,onTouchEnd:handleTouchEnd,children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"10px\"},children:[/*#__PURE__*/_jsx(\"button\",{className:\"category-button\",onClick:prev,disabled:index===0,children:\"\\u2190\"}),/*#__PURE__*/_jsx(\"button\",{className:\"category-button\",onClick:next,disabled:index===maxIndex,children:\"\\u2192\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid\",children:currentItems.map((item,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"img\",{src:item.poster,alt:item.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:item.title}),/*#__PURE__*/_jsx(\"p\",{onClick:()=>handleToggleExpand(i+index*itemsPerPage),style:{cursor:\"pointer\"},children:expanded[i+index*itemsPerPage]?item.description:item.description.split(\".\")[0]+\"...\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"controls\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"rating\",children:[1,2,3,4,5].map(star=>/*#__PURE__*/_jsx(\"span\",{onClick:()=>onRate(i+index*itemsPerPage,star),style:{color:(item.rating||0)>=star?\"gold\":\"#ccc\",cursor:\"pointer\"},children:\"\\u2605\"},star))}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:item.watched||false,onChange:()=>onToggleWatched(i+index*itemsPerPage)}),\" \\u041F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\\u0435\\u043D\\u043E\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onDelete(i+index*itemsPerPage),children:\"\\u0421\\u043A\\u0440\\u044B\\u0442\\u044C\"})]})]})]},item.title))})]});}export default Carousel;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Carousel","_ref","items","onRate","onToggleWatched","onDelete","index","setIndex","expanded","setExpanded","touchStartX","setTouchStartX","isMobile","window","innerWidth","itemsPerPage","maxIndex","Math","ceil","length","Array","fill","handleToggleExpand","i","prev","updated","next","min","max","currentItems","slice","handleTouchStart","e","touches","clientX","handleTouchEnd","deltaX","changedTouches","onTouchStart","onTouchEnd","children","style","marginTop","className","onClick","disabled","map","item","src","poster","alt","title","cursor","description","split","star","color","rating","type","checked","watched","onChange"],"sources":["D:/what-to-watch (1)/src/components/Carousel.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nfunction Carousel({ items, onRate, onToggleWatched, onDelete }) {\n  const [index, setIndex] = useState(0);\n  const [expanded, setExpanded] = useState([]);\n  const [touchStartX, setTouchStartX] = useState(null);\n\n  const isMobile = window.innerWidth < 768;\n  const itemsPerPage = isMobile ? 4 : 8;\n  const maxIndex = Math.ceil(items.length / itemsPerPage) - 1;\n\n  useEffect(() => {\n    setExpanded(new Array(items.length).fill(false));\n  }, [items]);\n\n  const handleToggleExpand = (i) => {\n    setExpanded((prev) => {\n      const updated = [...prev];\n      updated[i] = !updated[i];\n      return updated;\n    });\n  };\n\n  const next = () => setIndex((prev) => Math.min(prev + 1, maxIndex));\n  const prev = () => setIndex((prev) => Math.max(prev - 1, 0));\n\n  const currentItems = items.slice(\n    index * itemsPerPage,\n    index * itemsPerPage + itemsPerPage\n  );\n\n  const handleTouchStart = (e) => setTouchStartX(e.touches[0].clientX);\n  const handleTouchEnd = (e) => {\n    if (touchStartX === null) return;\n    const deltaX = e.changedTouches[0].clientX - touchStartX;\n    if (deltaX > 50) prev();\n    else if (deltaX < -50) next();\n    setTouchStartX(null);\n  };\n\n  return (\n    <div\n      onTouchStart={handleTouchStart}\n      onTouchEnd={handleTouchEnd}\n    >\n      <div style={{ marginTop: \"10px\" }}>\n        <button className=\"category-button\" onClick={prev} disabled={index === 0}>\n          ←\n        </button>\n        <button className=\"category-button\" onClick={next} disabled={index === maxIndex}>\n          →\n        </button>\n      </div>\n\n      <div className=\"grid\">\n        {currentItems.map((item, i) => (\n          <div className=\"card\" key={item.title}>\n            <img src={item.poster} alt={item.title} />\n            <div className=\"card-content\">\n              <h3>{item.title}</h3>\n              <p onClick={() => handleToggleExpand(i + index * itemsPerPage)} style={{ cursor: \"pointer\" }}>\n                {expanded[i + index * itemsPerPage]\n                  ? item.description\n                  : item.description.split(\".\")[0] + \"...\"}\n              </p>\n              <div className=\"controls\">\n                <div className=\"rating\">\n                  {[1, 2, 3, 4, 5].map((star) => (\n                    <span\n                      key={star}\n                      onClick={() => onRate(i + index * itemsPerPage, star)}\n                      style={{ color: (item.rating || 0) >= star ? \"gold\" : \"#ccc\", cursor: \"pointer\" }}\n                    >\n                      ★\n                    </span>\n                  ))}\n                </div>\n                <label>\n                  <input\n                    type=\"checkbox\"\n                    checked={item.watched || false}\n                    onChange={() => onToggleWatched(i + index * itemsPerPage)}\n                  /> Просмотрено\n                </label>\n                <button onClick={() => onDelete(i + index * itemsPerPage)}>Скрыть</button>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default Carousel;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}